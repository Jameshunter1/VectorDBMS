#!/bin/sh
# Git pre-commit hook to format code using clang-format

echo "Running clang-format via format.ps1..."
powershell.exe -NoProfile -ExecutionPolicy Bypass -File ./format.ps1

if [ $? -ne 0 ]; then
    echo "clang-format failed. Aborting commit."
    exit 1
fi

# Automatically stage changes made by the formatting script
echo "Staging changes made by clang-format..."
git add .

echo "clang-format completed successfully."